<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Reviews Admin</title>
  <style>
    body{font-family:Segoe UI,Arial;background:#081018;color:#e7edf3;padding:18px}
    .panel{max-width:960px;margin:0 auto;background:#0e1114;padding:18px;border-radius:10px}
    .review{padding:12px;border-radius:8px;background:#071018;margin-bottom:8px}
    .meta{color:#9aa6b2;font-size:.9rem}
    .controls{display:flex;gap:8px}
  </style>
</head>
<body>
  <div class="panel">
    <h2>Reviews Admin</h2>
    <div class="controls"><button id="reload">Reload</button><button id="download">Download JSON</button></div>
    <div id="list" style="margin-top:12px; max-height:70vh; overflow:auto">Loading...</div>
  </div>
  <script>
    async function load(){
      const el = document.getElementById('list'); el.textContent='Loading...';
      try{ const r = await fetch('/reviews.json', {cache:'no-store'}); const arr = await r.json(); el.innerHTML=''; if(!arr.length) el.textContent='No reviews'; arr.slice().reverse().forEach(it=>{ const d=document.createElement('div'); d.className='review'; const m=document.createElement('div'); m.className='meta'; m.textContent=(it.user||'Anonymous')+ ' • '+(it.rating||'')+'★ • '+new Date(it.timestamp||Date.now()).toLocaleString(); const t=document.createElement('div'); t.textContent=it.feedback||''; d.appendChild(m); d.appendChild(t); el.appendChild(d); }); }catch(e){ el.textContent='Failed to load'; }
    }
    document.getElementById('reload').addEventListener('click', load);
    document.getElementById('download').addEventListener('click', async ()=>{ const r = await fetch('/reviews.json', {cache:'no-store'}); const arr = await r.json(); const b = new Blob([JSON.stringify(arr,null,2)],{type:'application/json'}); const u = URL.createObjectURL(b); const a = document.createElement('a'); a.href=u; a.download='reviews.json'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(u); });
    load();
  </script>
</body>
</html>
